# Backend

Backend реализован на Go и предоставляет набор служебных эндпоинтов, а также проксирование запросов во внешний API.

## Запуск

Из папки `backend`:

```bash
cd backend
go run .
```

По умолчанию сервер запускается на порту `8080`.

## Переменные окружения

- `PORT` - порт HTTP-сервера, по умолчанию `8080`.
- `API_URL` - URL внешнего API, по умолчанию `https://api-s.anixsekai.com`.
- `CHANGELOG_DIR` - каталог с файлами changelog, по умолчанию `../frontend/public/changelog`.
- `CORS_ORIGIN` - разрешенный источник для CORS, по умолчанию `*`.

## Эндпоинты

Полный список эндпоинтов описан в `docs/api.md`.

## Версии приложения

Текущая версия задается константой `CurrentAppVersion` в `backend/main.go`. Список предыдущих версий формируется по файлам `*.md` в каталоге changelog.

## Прокси изображений

Эндпоинт `/api/image` принимает параметр `url` и проксирует изображение только если:
- URL использует `http` или `https`.
- Хост входит в whitelist: `*.anixmirai.com` или `*.anixsekai.com`.

## CORS

CORS включен для `/api/*` и использует значение из `CORS_ORIGIN`.
